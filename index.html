<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Vim  实习生 by baoyuanzh</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Vim  实习生</h1>
        <h2>实用 VIM 技术报告</h2>
        <p>本网页内容主要参考<br/><a href="http://drewneil.com/">Drew Neil</a> 的 <a href="https://pragprog.com/book/dnvim/practical-vim">Practical Vim</a><br/>写作而成</p>
        <a href="https://github.com/baoyuanzh/VIM_Internship" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">

        <!-- Main Contents -->
        <section id="main-content">
          <section class="intro">
            <h3>欢迎来到我的 &laquo;VIM 实习生&raquo;</h3>
            <p>几年前偶尔接触了 Vim ，同时听说了 Emacs ，之后便断断续续的开始自学 Vim ，资料找过不少，看了忘忘了又看，发现 Vim 水平没提高多少，依然只会用简单的几个命令，连寄存器都没怎么用过，更别说什么宏啊，映射啊，折叠啊之类听起来就高大上的东西。有问题的时候就上网查一下，用过之后就忘记了，又要用就又去查，其实心里面一直觉得老这么着也不是个事啊，但还是这么着又过了段时间，大概觉得也许是 Vim 不适合我，所以就去尝试了 Emacs ，用了一段时间觉得要记得命令太多，而且多是组合键，哪怕是改了键盘 Tab 键也不适应，最后又不了了之了。</p>
            <p id="painting-analogy">终于有一天，在一本书上我读到了这么一段话，当然了，是我翻译过的 : )</p>
            <blockquote>你估摸着一个画家在作画时，有多少时间画笔和帆布是接触着的？当然了，这要看是谁在作画，但如果你要是告诉我有一半的时间，我一定会觉得难以置信。想想画家除了用画笔在帆布上作画以外的事情，比如观察画面上的物体，调整光线，调色；又比如，谁说非要用画笔的，有时候还可以用刮刀来改动一下局部的风格，又或者是用棉球微微调整画好的地方。画家不会傻不兮兮地把画笔按在帆布上来休息吧。</blockquote>
            <p>读到这一段话的时候简直如当头棒喝，我本人曾有一段时期经过专业的绘画训练，因而对此感触实在是太深刻了，这一段话接着这样写道：</p>
            <blockquote>Vim 也是如此，其普通模式实是再自然不过的事情了，从名字里就可以看出端倪了，真的如此！</blockquote>
            <blockquote>就像画家需要停笔思考，程序员也是如此，他们也需要花时间来一段一段组合出代码。更多的时间花在思考，阅读，以及从一个地方跳到另一个地方的转移上面，而当他们的确需要做出改动时，谁说非要进入插入模式呢，在普通模式下，他们就可以调整已有代码的格式，复制，移动或者删除，在普通模式下他们就有足够多的工具来完成这样的任务。</blockquote>
            <p>然后我如饥似渴的读完了整本书，它让我知道该怎样去欣赏 Vim 的优雅与气质，尽管此后由于一些事情，我未能将书中所学用于实践，看过的又几乎全忘了，但是我始终没有忘记这一段描写对 Vim 阐述，我知道这就是我需要的，所以如今我再次阅读该书，并在学习的同时，希望将紧要简短的内容制作成网页，以便自己反复记忆。</p>
            <p>我想也许学习 Vim 最好的方式就是去理解它，按照它的风格去编辑，然后也许有一天你会发现，Vim 开始理解你了。</p>
            <p>所谓独乐乐不如众乐乐，我将其在本站公布，同时作为我学习 HTML&amp;CSS 建设的第一个网站</p>
            <p>本网站的内容将全部通过 Vim 录入，更准确地说，通过我 Macbook Pro 上的 mvim 与 vim 录入。</p>

          </section>

          <!-- Part 0: The Vim Way -->
          <section class="p0-way">
            <h3>我们都是 VIM 派</h3>
            <p>说实话，编辑工作从某种角度下看，其本质是重复的。那么简化这种重复的工作绝对可以大量的节约时间，虽然不是根本性的，但却是多方面的。</p>
            <p>Vim 尤其善于处理重复，因为其自动为我们记录下最近的操作，我们总可以用一个句点来重复。为了最高效的利用这一特性，我们有着一个理想化的公式，即所谓的<b>句点公式</b>：</p>
            <p><em>一键移动，一键操作</em></p>
            <p>而这样的理念似乎贯穿着整个 Vim 的设计，我将之称为 Vim 派，理解 Vim 派是你开始理解 Vim 的第一步。但是站着说话不腰疼，除非你学会如何组织操作以便 Vim 为我们完成重复的工作，否则 Vim 特意为重复所做的优化将毫无用武之地。以下通过五个实例来说明这一点。</p>

            <!-- Tip 1 -->
            <article id="tip-1">
              <h4>备忘一、理解句点命令</h4>
              <p>句点命令的官方定义为<b>重复执行最后一次改动</b>。要真正应用好这一点，首先要明白什么是“改动”。</p>
              <p id="tip-1-change">在 Vim 看来，一次“改动”大概可以分成这么两类：</p>
              <ol>
                <li>在普通模式下的一个命令，比如删除一个字符 <span class="command">x</span>，删除一行 <span class="command">dd</span>，缩进一行 <span class="command">&gt;&gt;</span> 。</li>
                <li>从普通模式进入插入模式到离开插入模式间所有的按键操作整个作为一次改动。</li>
              </ol>
              <p>试着下载文件 <a download="tip-1.txt" href="https://raw.githubusercontent.com/baoyuanzh/VIM_Internship/master/tip-1.txt">tip-1.txt</a> 用 Vim 打开，并按上面说的做，你就知道我在说什么了。<p>
            </article>

            <!-- Tip 2 -->
            <article id="tip-2">
              <h4>备忘二、避免重复原始操作</h4>
              <p>有些操作描述起来是完全重复的，比如在每一行的末尾加一个分号，你只要通过 <span class="command">j</span> 键移动到要加分号的行，按 <span class="command">$</span> 键移动至行尾，然后按 <span class="command">a</span> 键就可以加入分号 <span class="command">;</span> 了，完成后按 <span class="command">[ESC]</span> 键回到普通模式。总结一下，在某一行完成这一任务需要依次完成以下按键 <span class="command">j $ a ; [ESC]</span>，然后你可以不断重复这一操作已完成改动。看到这里，如果你真的理解了句点命令的含义，你就会发现其中的 <span class="command">a ; [ESC]</span> 就是一个完整的“改动”，从而可以用句点 <span class="command">.</span> 一键代替，于是原本的操作已经精简为 <span class="command">j $ .</span> 了。怎么样，感觉到 Vim 的威力了吗？</p>
              <p>事实上，我们还可以作进一步精简，考虑到，命令 <span class="command">A</span> 相当于 <span class="command">$ a</span> 两次按键，如果从一开始我们就这样做，即使用 <span class="command">j A ; [ESC]</span> 加分号，那么在重复时，我们只需要按 <span class="command">j .</span> 两键就可以了，还记得那个句点公式吗，一键移动，一键操作，正是如此的写照。</p>
              <p>从这个简单的例子可见，磨刀不误砍柴工，好好组织一下第一次操作，可以为你之后的重复操作节省不少力气哦！</p>
              <p>像刚刚的例子，命令 <span class="command">A</span> 可以看成是两个命令 <span class="command">$ a</span> 的组合操作，Vim 中其实有不少这样的例子，以下就是一些常见的例子，具体解释请自行查询 <span class="command">:h [command]</span> 。</p>
              <ul>
                <li> <span class="command">C</span> = <span class="command">c $</span> </li>
                <li> <span class="command">s</span> = <span class="command">c l</span> </li>
                <li> <span class="command">S</span> = <span class="command">^ C</span> </li>
                <li> <span class="command">I</span> = <span class="command">^ i</span> </li>
                <li> <span class="command">A</span> = <span class="command">$ a</span> </li>
                <li> <span class="command">o</span> = <span class="command">A [Enter]<span> </li>
                <li> <span class="command">O</span> = <span class="command">k o</span> </li>
              </ul>
              <p>下载文件 <a download="tip-2.txt" href="https://raw.githubusercontent.com/baoyuanzh/VIM_Internship/master/tip-2.txt">tip-2.txt</a> 尝试一下吧。<p>
            </article>
            
            <!-- Tip 3 -->
            <article id="tip-3">
              <h4>备忘三、退一步，海阔天空</h4>
              <p>为了重复时节省力气，在第一次操作的时候偶尔可以牺牲一下，比如说我们想在某个特定的字符前后加入空格，我们可以定位到这个字符然后按下 <span class="command">i</span> 键进入插入模式插入空格，但是后面的空格怎么办呢，在插入模式下，光标是不能移动的，即使使用左右方向键移动到那个字符后面加入空格完成了整个操作也是没用的，因为在你按下方向键的那一刻，改动已经终止，当你再次回到普通模式下，按下句点 <span class="command">.</span> 时你会发现，它只在光标前加入了一个空格，而光标后面没有任何改变，至于为什么是这样，我还在学习中，如果你知道请<a href="mailto:baoyuan.zh@gmail.com">邮件</a>联系我，或者在我 Github 的项目创建一个 <a href="https://github.com/baoyuanzh/VIM_Internship/issues/new">issue</a> 。</p>
              <p>事实上在插入模式下来移动光标是不推荐的，因为这样会引起一系列的副作用。更为合理的做法是利用替换命令 <span class="command">s</span> ，该命令将删除当前光标下地字符然后进入插入模式等待输入，这时你就可以完成改动，再回到普通模式了，这样一来，最后一次改动就是在特定的字符前后加入空格了，接着我们就可以放心大胆的定位到下一个特定字符，通过句点命令来重复操作了。</p>
              <p>从这个例子可以看到，有时候光是想要利用这个句点命令来方便重复操作，其本身就要费不少心思的，但是相信我，你一定会得到回报的。不信，那你下载文件 <a download="tip-3.txt" href="https://raw.githubusercontent.com/baoyuanzh/VIM_Internship/master/tip-3.txt">tip-3.txt</a> 试试吧。内有惊喜，如果你乐意学习。<p>
            </article>
            
            <!-- Tip 4 -->
            <article id="tip-4">
              <h4>备忘四、执行、重复、撤销</h4>
              <p>重复的操作，用太嗨了给用过头了怎么办？你一定会遇到这种情况，比如多按了一次句点命令，或者连着定位了两次，又或者漏了用句点命令重复，等等。<p>
              <p>Vim 已经考虑到这种状况，因此对于一般的定位，执行和重复操作都设定了相应的撤销命令，具体的可以参考下表。</p>
              <table>
                <tr> <th>目的</th> <th>执行</th> <th>重复</th> <th>撤销</th> </tr>
                <tr> <td>改动</td> <td>一般的编辑操作</td> <td><span class="command">.</span></td> <td><span class="command">u</span></td> </tr>
                <tr> <td>搜索定位一行中光标后的某个字符</td> <td>f{某个字符} 或 t{某个字符}</td> <td><span class="command">;</span></td> <td><span class="command">,</span></td> </tr>
                <tr> <td>搜索定位一行中光标前的某个字符</td> <td>F{某个字符} 或 T{某个字符}</td> <td><span class="command">;</span></td> <td><span class="command">,</span></td> </tr>
                <tr> <td>搜索定位文件中光标后的某个模式匹配</td> <td>/模式[enter]</td> <td><span class="command">n</span></td> <td><span class="command">N</span></td> </tr>
                <tr> <td>搜索定位文件中光标前的某个模式匹配</td> <td>?模式[enter]</td> <td><span class="command">n</span></td> <td><span class="command">N</span></td> </tr>
                <tr> <td>替换某个模式匹配</td> <td>:s/模式匹配/替换模式</td> <td><span class="command">&amp;</span></td> <td><span class="command">u</span></td> </tr>
                <tr> <td>执行一系列改动</td> <td>qx{一系列改动}q</td> <td><span class="command">@x</span></td> <td><span class="command">u</span></td> </tr>
              </table>
            </article>
            
            <!-- Tip 5 -->
            <article id="tip-5">
              <h4>备忘五、手动搜索与替换</h4>
              <p>一般搜索以命令 <span class="command">/</span> 或者 <span class="command">?</span> 发起，但有时后如果光标恰好置于要搜索的文字上时，可以直接用命令 <span class="command">*</span> 来方便操作。具体见 <span class="command">:h *</span> 。</p>
              <p>想想看，有了这一命令，再结合重复操作 <span class="command">n</span> 以及撤销操作 <span class="command">N</span> ，它们就构成了完整的移动命令，方便你定位到需要改动的地方，再次以句点命令重复上一次改动。</p>
            </article>
            
            <!-- Tip 6 -->
            <article id="tip-6">
              <h4>备忘六、句点公式</h4>
              <p>总结一下，从备忘一到备忘五，它们都有一个统一的模式，即<em>一键移动，一键操作</em>。为了强化记忆我们将之称为<em>句点公式</em>。这在 Vim 来说是理想化的，试想还能有比这更简洁的方案吗？没有。</p>
              <p>再次强调，这一思想将贯穿于整个 Vim 的设计。</p>
            </article>

          </section>

          <!-- Part 1: Modes -->
          <section class="p1-modes">
            <h3>VIM 的几种模式</h3>
            <p>Vim 有以下几种模式：</p>
            <ol>
              <li>普通模式 —— Normal Mode</li>
              <li>插入模式 —— Insert Mode</li>
              <li>可视模式 —— Visual Mode</li>
              <li>命令行模式 —— Command-Line Mode</li>
            </ol>
            <p>同样的按键在不同的模式下，可能代表了不同的命令，因此，清楚了解 Vim 当前处于什么模式之下以及如何在它们之间转换是完成各类操作的必要前提。</p>

            <!-- Tip 7 -->
            <article id="tip-7">
              <h4>备忘七、休息时请离开你的画布</h4>
              <p>Vim 的默认模式为普通模式，对于习惯了其他编辑器的人来说，这有点奇怪，但是对于 Vim 的熟练工来说，如果默认模式不是普通模式的话会是难以想象的事情。</p>
              <p>具体请参见我在开头就提到的关于绘画的<a href="#painting-analogy">类比</a>。</p>
            </article>

            <!-- Tip 8 -->
            <article id="tip-8">
              <h4>备忘八、撤销改动</h4>
              <p><span class="command">u</span> 是 Vim 的撤销命令，它撤销最近的一次改动。这里不得不再次提到<a href="#tip-1-change">什么是改动</a>？</p>
              <p>为方便和完整起见，重述如下：</p>
              <ol>
                <li>任何从普通模式，可视模式以及命令行模式下发起的一次命令都算作一次改动。</li>
                <li>从进入插入模式到离开之间的任何输入或删除都算作一次改动。</li>
              </ol>
              <p>由于 Vim 的这一特性，其撤销操作是可自定义的。比如你什么时候离开插入模式完全由你决定。关于这一点，我们还可以多说一些，一个比较好的习惯就是在你写完一句话或一段话的时候离开插入模式。通常的规则就是，当你想停下来一会儿，而这一会儿的时间又足够你问自己这样一个问题：我该离开插入模式吗？那么别犹豫了，回到普通模式吧。</p>
              <p class="attention">注意：在插入模式下移动光标将重置改动，这就好像回到普通模式下用命令 <span class="command">h</span>，<span class="command">j</span>，<span class="command">k</span>，<span class="command">l</span> 来移动后再次进入插入模式。</p>

            </article>

            <!-- Tip 9 -->
            <article id="tip-9">
              <h4>备忘九、组织改动以便重复</h4>
              <p>还是那句老话，想要充分利用句点命令的作用，常常需要一些预见和思考。</p>
              <p>看一个例子，比如说我们要删除一个单词，而光标恰好处于这个单词的最后一个字母上，有多少种办法可以达到目的呢？<p>
              <ol>
                <li>向后删除 <span class="command">db</span> 接着 <span class="command">x</span></li>
                <li>向前删除 <span class="command">b</span> 接着 <span class="command">dw</span></li>
                <li>删除整个单词 <span class="command">daw</span></li>
              </ol>
              <p>这三种方案看起来都需要三次按键，但它们的效率相同吗？这视情况而定，比如说我们需要再删除此时最后一个单词，听起来有点熟悉，重复最后一次改动，嗯，句点命令来重复，但是它在三种情况下都等价吗？当然不是。分别来看这三种情况：</p>
              <ol>
                <li>此时 <span class="command">.</span> 相当于 <span class="command">x</span>，似乎没什么意义。</li>
                <li>此时 <span class="command">.</span> 相当于 <span class="command">dw</span>，还不错，但首先还需要一次定位。</li>
                <li>此时 <span class="command">.</span> 相当于 <span class="command">daw</span>，哇！这个谁用谁知道。<a download="tip-3.txt" href="https://raw.githubusercontent.com/baoyuanzh/VIM_Internship/master/tip-9.txt">tip-9.txt</a></li>
              </ol>
              <p>因此，有时候，句点命令并不是那么显而易见的，你还需要去组织一个可重复的模式。</p>
              <p>本备忘用到的命令，具体参见 <span class="command">:h b</span> 和 <span class="command">:h aw</span>。</p>
            </article>

            <!-- Tip 10 -->
            <article id="tip-10">
              <h4>备忘十</h4>
              <p></p>
            </article>

            <!-- Tip 11 -->
            <article id="tip-11">
              <h4>备忘十一</h4>
              <p></p>
            </article>

            <!-- Tip 12 -->
            <article id="tip-12">
              <h4>备忘十二</h4>
              <p></p>
            </article>

          </section>

          <!-- Part 2: Files -->
          <section class="p2-files">
            <h3>文件处理</h3>
            <p></p>
          </section>

          <!-- Part 3: Getting Around Faster -->
          <section class="p3-getting-around-faster">
            <h3>快速浏览与操作</h3>
            <p></p>
          </section>
          
          <!-- Part 4: Registers -->
          <section class="p4-registers">
            <h3>寄存器</h3>
            <p></p>
          </section>

          <!-- Part 5: Patterns -->
          <section class="p5-patterns">
            <h3>模型</h3>
            <p></p>
          </section>

          <!-- Part 6: Tools -->
          <section class="p6-tools">
            <h3>工具</h3> <p></p> </section>

          <!-- About Author -->
          <section class="Author">
            <h3>作者</h3>
            <p></p>
          </section>

          <!-- Contact me -->
          <section class="contact">
            <h3>联系我</h3>
            <p>如果您对本网站有问题可<a href="mailto:baoyuan.zh@gmail.com">邮件</a>与我联系</p>
          </section>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/baoyuanzh/VIM_Internship/zipball/master" class="button">
            <small>Download</small>
            master.zip 
          </a>
          <a href="https://github.com/baoyuanzh/VIM_Internship/zipball/gh-pages" class="button">
            <small>Download</small>
            pages.zip 
          </a>
          <a href="https://github.com/baoyuanzh/VIM_Internship/zipball/master" class="button">
            <small>Download</small>
            master.tar.gz 
          </a>
          <a href="https://github.com/baoyuanzh/VIM_Internship/tarball/gh-pages" class="button">
            <small>Download</small>
            pages.tar.gz 
          </a>

          <p class="repo-owner"><a href="https://github.com/baoyuanzh/VIM_Internship"></a> is maintained by <a href="https://github.com/baoyuanzh">宝元(baoyuanzh)</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
